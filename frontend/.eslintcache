[{"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/index.js":"1","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/reportWebVitals.js":"2","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/App.js":"3","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/contexts/CurrentUserContext.js":"4","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Main/Main.js":"5","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/EditProfilePopup/EditProfilePopup.js":"6","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/EditAvatarPopup/EditAvatarPopup.js":"7","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/AddPlacePopup/AddPlacePopup.js":"8","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/RemoveCardPopup/RemoveCardPopup.js":"9","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Login/Login.js":"10","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/ProtectedRoute/ProtectedRoute.js":"11","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Register/Register.js":"12","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/InfoTooltip/InfoTooltip.js":"13","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/ImagePopup/ImagePopup.js":"14","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/utils/api.js":"15","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/utils/projectAuth.js":"16","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Card/Card.js":"17","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Footer/Footer.js":"18","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Header/Header.js":"19","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/PopupWithForm/PopupWithForm.js":"20"},{"size":346,"mtime":1613649535109,"results":"21","hashOfConfig":"22"},{"size":362,"mtime":1613649535109,"results":"23","hashOfConfig":"22"},{"size":8568,"mtime":1614253478241,"results":"24","hashOfConfig":"22"},{"size":85,"mtime":1613649535105,"results":"25","hashOfConfig":"22"},{"size":1826,"mtime":1614259781900,"results":"26","hashOfConfig":"22"},{"size":1524,"mtime":1613649535105,"results":"27","hashOfConfig":"22"},{"size":859,"mtime":1613649535105,"results":"28","hashOfConfig":"22"},{"size":1277,"mtime":1613649535105,"results":"29","hashOfConfig":"22"},{"size":475,"mtime":1613649535105,"results":"30","hashOfConfig":"22"},{"size":1515,"mtime":1614101493396,"results":"31","hashOfConfig":"22"},{"size":322,"mtime":1614099804306,"results":"32","hashOfConfig":"22"},{"size":1762,"mtime":1614099823058,"results":"33","hashOfConfig":"22"},{"size":745,"mtime":1613649535105,"results":"34","hashOfConfig":"22"},{"size":660,"mtime":1613649535105,"results":"35","hashOfConfig":"22"},{"size":1973,"mtime":1614252714524,"results":"36","hashOfConfig":"22"},{"size":1229,"mtime":1614237471320,"results":"37","hashOfConfig":"22"},{"size":1528,"mtime":1613649535105,"results":"38","hashOfConfig":"22"},{"size":264,"mtime":1613649535105,"results":"39","hashOfConfig":"22"},{"size":1099,"mtime":1613649535105,"results":"40","hashOfConfig":"22"},{"size":828,"mtime":1613649535105,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"bow1ye",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/index.js",[],["85","86"],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/reportWebVitals.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/App.js",["87","88"],"import { React, useEffect, useState } from \"react\";\nimport { Route, Switch, Redirect, withRouter, useHistory } from \"react-router-dom\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport succed from '../images/vector/succed.svg';\nimport fail from '../images/vector/fail.svg';\nimport Main from '../components/Main/Main';\nimport ImagePopup from '../components/ImagePopup/ImagePopup';\nimport EditProfilePopup from '../components/EditProfilePopup/EditProfilePopup';\nimport EditAvatarPopup from '../components/EditAvatarPopup/EditAvatarPopup';\nimport AddPlacePopup from '../components/AddPlacePopup/AddPlacePopup';\nimport RemoveCardPopup from '../components/RemoveCardPopup/RemoveCardPopup';\nimport Login from '../components/Login/Login';\nimport Register from '../components/Register/Register';\nimport ProtectedRoute from '../components/ProtectedRoute/ProtectedRoute';\nimport InfoTooltip from '../components/InfoTooltip/InfoTooltip';\nimport api from '../utils/api';\nimport * as projectAuth from '../utils/projectAuth';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(false);\n  const [currentUser, setСurrentUser] = useState(\"\");\n  const [currentId, setCurrentId] = useState(\"\");\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userData, setUserData] = useState({\n    email: '',\n    password: '',\n  });\n  const [infoTool, setInfoTool] = useState({\n    message: '',\n    img: ''\n  });\n  const [registerPopup, setRegisterPopup] = useState();\n  const [savePreload, setSavePreload] = useState('Сохранить')\n  const [createPreload, setCreatePreload] = useState('Создать')\n\n  const err = (res) => {\n    console.log(`Ошибка: ${res}`);\n  };\n\n  const history = useHistory();\n\n  const escFunction = (event) => {\n    if (event.keyCode === 27) {\n      closeAllPopups();\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwt');\n    if (token) {\n      projectAuth.getContent(token).then((res) => {\n        if (res) {\n          setUserData({ email: res.email });\n        }\n      })\n        .then(() => {\n          setLoggedIn(true);\n          history.push(\"/\");\n        })\n        .catch((res) => {\n          console.log(`Ошибка: ${res}`);\n        })\n    }\n  }, []);\n\n  useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n      api.getInitialCards().then((res) => {\n        setCards(res);\n      });\n    }\n  }, [loggedIn]);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  });\n\n  useEffect(() => {\n    api.getUser().then((res) => {\n      setСurrentUser(res);\n    }).catch(err)\n  }, []);\n\n  function handleRegister(data) {\n    const { email, password } = data;\n    projectAuth.register(email, password).then((res) => {\n      if (res) {\n        history.push('/signin');\n        setRegisterPopup(true);\n        setInfoTool({\n          message: 'Вы успешно зарегистрировались!',\n          img: succed\n        })\n      }\n    })\n      .catch((err) => {\n        setRegisterPopup(true);\n        setInfoTool({\n          message: 'Что-то пошло не так! Попробуйте ещё раз.',\n          img: fail\n        })\n        console.log(`Такой email существует ${err}`)\n      })\n  }\n\n  function handleLogin(data) {\n    const { email, password } = data;\n    projectAuth.authorize(email, password).then((res) => {\n      if (res.token) {\n        history.push('/');\n        setLoggedIn(true);\n        setUserData({ email: email });\n        localStorage.setItem('jwt', res.token);\n      }\n    })\n      .catch(err)\n  }\n\n  function signOut() {\n    localStorage.removeItem('jwt')\n    setLoggedIn(false)\n    history.push('/signin')\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setCreatePreload('Создание...')\n    api.createNewCard(data).then((res) => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    })\n      .catch(err)\n      .finally(() => {\n        setCreatePreload('Создать');\n        closeAllPopups();\n      }\n      )\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    }).catch(err)\n  }\n\n  function handleCardDelete(cardId) {\n    return api.deleteCard(cardId).then(() => {\n      const newList = cards.filter((c) => c._id !== cardId);\n      return setCards(newList);\n    })\n      .then(closeAllPopups())\n      .catch(err)\n  }\n\n  function handleUpdateAvatar(data) {\n    setSavePreload('Сохранение...')\n    api.setAvatar(data)\n      .then((res) => {\n        setСurrentUser(res);\n      })\n      .catch(err)\n      .finally(() => {\n        setSavePreload('Сохранить');\n        closeAllPopups();\n      }\n      )\n  }\n\n  function handleUpdateUser(data) {\n    setSavePreload('Сохранение...')\n    api.setUserInfo(data.name, data.about)\n      .then((res) => {\n        setСurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err)\n      .finally(() => {\n        setSavePreload('Сохранить');\n        closeAllPopups();\n      }\n      )\n  }\n\n  function handleDeleteCardClick() {\n    setIsDeletePopupOpen(true);\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  function handleCardClick(props) {\n    setSelectedCard({ link: props.link, name: props.name });\n  }\n\n  function closeAllPopups() {\n    setIsDeletePopupOpen(false)\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(false);\n    setRegisterPopup(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n\n        <Switch>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            component={Main}\n            email={userData.email}\n            signOut={signOut}\n            loggedIn={loggedIn}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onPopupDelete={handleDeleteCardClick}\n            setId={setCurrentId}\n            handleCardDelete={handleCardDelete}\n          />\n          <Route path=\"/signin\">\n            <Login\n              handleLogin={handleLogin}\n            />\n          </Route>\n          <Route path=\"/signup\">\n            <Register\n              onRegister={handleRegister}\n            />\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n          <Route path=\"/my-profile\">\n          </Route>\n        </Switch>\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          savePreload={savePreload}\n        />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          savePreload={savePreload}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onCreateCard={handleAddPlaceSubmit}\n          createPreload={createPreload}\n        />\n\n        <RemoveCardPopup\n          isOpen={isDeletePopupOpen}\n          onClose={closeAllPopups}\n          onCardDelete={handleCardDelete}\n          currentId={currentId}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n        <InfoTooltip\n          isOpen={registerPopup}\n          onClose={closeAllPopups}\n          infoTool={infoTool}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);","/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/contexts/CurrentUserContext.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Main/Main.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/EditProfilePopup/EditProfilePopup.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/EditAvatarPopup/EditAvatarPopup.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/AddPlacePopup/AddPlacePopup.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/RemoveCardPopup/RemoveCardPopup.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Login/Login.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/ProtectedRoute/ProtectedRoute.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Register/Register.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/InfoTooltip/InfoTooltip.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/ImagePopup/ImagePopup.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/utils/api.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/utils/projectAuth.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Card/Card.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Footer/Footer.js",[],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/Header/Header.js",[],["89","90"],"/home/monarh/Документы/Web_Development/mesto_finally/frontend/src/components/PopupWithForm/PopupWithForm.js",[],{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","severity":1,"message":"96","line":70,"column":6,"nodeType":"97","endLine":70,"endColumn":8,"suggestions":"98"},{"ruleId":"95","severity":1,"message":"96","line":79,"column":6,"nodeType":"97","endLine":79,"endColumn":16,"suggestions":"99"},{"ruleId":"91","replacedBy":"100"},{"ruleId":"93","replacedBy":"101"},"no-native-reassign",["102"],"no-negated-in-lhs",["103"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["104"],["105"],["102"],["103"],"no-global-assign","no-unsafe-negation",{"desc":"106","fix":"107"},{"desc":"108","fix":"109"},"Update the dependencies array to be: [history]",{"range":"110","text":"111"},"Update the dependencies array to be: [history, loggedIn]",{"range":"112","text":"113"},[2606,2608],"[history]",[2765,2775],"[history, loggedIn]"]